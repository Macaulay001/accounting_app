{% extends "layout.html" %}
{% block content %}
<h2>Balance Sheet</h2>

<!-- Date Filter -->
<div class="card mb-4">
    <div class="card-header">
        <h5>Report Date</h5>
    </div>
    <div class="card-body">
        <form method="get" action="{{ url_for('balance_sheet_report') }}">
            <div class="row">
                <div class="col-md-4">
                    <label for="as_of_date" class="form-label">As of Date</label>
                    <input type="date" class="form-control" id="as_of_date" name="as_of_date" value="{{ balance_sheet_data.as_of_date }}">
                </div>
                <div class="col-md-4 d-flex align-items-end">
                    <button type="submit" class="btn btn-primary">Update Report</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- Balance Sheet -->
<div class="card">
    <div class="card-header">
        <h5>Balance Sheet - {{ balance_sheet_data.as_of_date }}</h5>
    </div>
    <div class="card-body">
        <div class="row">
            <!-- Assets Column -->
            <div class="col-md-6">
                <h6 class="text-primary">ASSETS</h6>
                <div class="table-responsive">
                    <table class="table table-sm">
                        <tbody>
                            <tr>
                                <td><strong>Current Assets</strong></td>
                                <td class="text-end"></td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;Cash on Hand</td>
                                <td class="text-end">₦{{ "%.2f"|format(balance_sheet_data.assets.current_assets) }}</td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;Bank Accounts</td>
                                <td class="text-end">₦0.00</td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;Accounts Receivable</td>
                                <td class="text-end">₦0.00</td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;Raw Materials Inventory</td>
                                <td class="text-end">₦0.00</td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;Work in Process</td>
                                <td class="text-end">₦0.00</td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;Finished Goods</td>
                                <td class="text-end">₦0.00</td>
                            </tr>
                            <tr class="table-light">
                                <td><strong>Total Current Assets</strong></td>
                                <td class="text-end"><strong>₦{{ "%.2f"|format(balance_sheet_data.assets.current_assets) }}</strong></td>
                            </tr>
                            
                            <tr>
                                <td><strong>Fixed Assets</strong></td>
                                <td class="text-end"></td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;Equipment</td>
                                <td class="text-end">₦{{ "%.2f"|format(balance_sheet_data.assets.fixed_assets) }}</td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;Less: Accumulated Depreciation</td>
                                <td class="text-end">₦0.00</td>
                            </tr>
                            <tr class="table-light">
                                <td><strong>Total Fixed Assets</strong></td>
                                <td class="text-end"><strong>₦{{ "%.2f"|format(balance_sheet_data.assets.fixed_assets) }}</strong></td>
                            </tr>
                            
                            <tr class="table-primary">
                                <td><strong>TOTAL ASSETS</strong></td>
                                <td class="text-end"><strong>₦{{ "%.2f"|format(balance_sheet_data.assets.total_assets) }}</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Liabilities & Equity Column -->
            <div class="col-md-6">
                <h6 class="text-danger">LIABILITIES</h6>
                <div class="table-responsive">
                    <table class="table table-sm">
                        <tbody>
                            <tr>
                                <td><strong>Current Liabilities</strong></td>
                                <td class="text-end"></td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;Accounts Payable</td>
                                <td class="text-end">₦{{ "%.2f"|format(balance_sheet_data.liabilities.current_liabilities) }}</td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;Accrued Expenses</td>
                                <td class="text-end">₦0.00</td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;Short-term Loans</td>
                                <td class="text-end">₦0.00</td>
                            </tr>
                            <tr class="table-light">
                                <td><strong>Total Liabilities</strong></td>
                                <td class="text-end"><strong>₦{{ "%.2f"|format(balance_sheet_data.liabilities.total_liabilities) }}</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <h6 class="text-success mt-4">EQUITY</h6>
                <div class="table-responsive">
                    <table class="table table-sm">
                        <tbody>
                            <tr>
                                <td><strong>Owner's Capital</strong></td>
                                <td class="text-end">₦{{ "%.2f"|format(balance_sheet_data.equity.owners_capital) }}</td>
                            </tr>
                            <tr>
                                <td><strong>Retained Earnings</strong></td>
                                <td class="text-end">₦{{ "%.2f"|format(balance_sheet_data.equity.retained_earnings) }}</td>
                            </tr>
                            <tr>
                                <td><strong>Current Year Profit/Loss</strong></td>
                                <td class="text-end">₦{{ "%.2f"|format(balance_sheet_data.equity.current_year_profit) }}</td>
                            </tr>
                            <tr class="table-light">
                                <td><strong>Total Equity</strong></td>
                                <td class="text-end"><strong>₦{{ "%.2f"|format(balance_sheet_data.equity.total_equity) }}</strong></td>
                            </tr>
                            
                            <tr class="table-primary">
                                <td><strong>TOTAL LIABILITIES & EQUITY</strong></td>
                                <td class="text-end"><strong>₦{{ "%.2f"|format(balance_sheet_data.liabilities.total_liabilities + balance_sheet_data.equity.total_equity) }}</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="mt-3">
    <button class="btn btn-outline-primary" onclick="window.print()">Print Report</button>
    <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">Back to Dashboard</a>
</div>
{% endblock %}
